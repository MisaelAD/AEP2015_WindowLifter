/*******************************************************************************
*		Practice Number 2
*		Automotive Entry Program 2015
*		Misael Alvarez
********************************************************************************/

/*******************************************************************************/
/*
\file       dummy.c
\brief      Dummy Functions
\author     Misael AD
\version    1.2
\date       June 2015
*/
/****************************************************************************************************/

/*****************************************************************************************************
 Include files
*****************************************************************************************************/

/* Core modules */
/* Variable types and common definitions */
#include "typedefs.h"

/* Own headers */
#include "dummy.h"
#include "windowlifter.h"

/* Used modules */
#include "LED.h"

/*****************************************************************************************************
 Declaration of module wide TYPEs 
*****************************************************************************************************/

/*****************************************************************************************************
 Definition of VARIABLEs 
*****************************************************************************************************/

extern TASKSTRUCT *rps_TaskPtr;

extern T_SBYTE  WindowPosition;

/*****************************************************************************************************
 Declaration of module wide FUNCTIONs 
*****************************************************************************************************/

/*****************************************************************************************************
 Definition of module wide MACROs / #DEFINE-CONSTANTs 
*****************************************************************************************************/

/*****************************************************************************************************
 Definition of module wide (CONST-) CONSTANTs 
*****************************************************************************************************/

/*****************************************************************************************************
 Code of module wide FUNCTIONS
*****************************************************************************************************/

/* PIT ISR 															*/
/* Increments counter and triggers function if period has completed	*/
/* June 2015 Continental AEP 										*/
void PIT_1ms(void)
{
	rps_TaskPtr->ruw_Counter++;
	if(rps_TaskPtr->ruw_Counter >= rps_TaskPtr->ruw_TopCount)	/* Check if match */
	{
		rps_TaskPtr->ruw_Counter=0;			/* Clear counter */
		rps_TaskPtr->cpfu_PerFunct();		/* Call function */
	}
	LED_WindowLifter(WindowPosition);
}
